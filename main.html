<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Click and Drag</title>
<style>
  html {
    box-sizing: border-box;
    background: url('https://source.unsplash.com/NFs6dRTBgaM/2000x2000') fixed;
    background-size: cover;
  }
  *, *:before, *:after {
    box-sizing: inherit;
  }
  body {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: sans-serif;
    font-size: 20px;
    margin: 0;
  }
  .items {
    height: 800px;
    padding: 100px;
    width: 80%;
    border: 2px solid white;
    overflow-x: scroll;
    overflow-y: hidden;
    white-space: nowrap;
    user-select: none;
    transition: all 0.2s;
    transform: scale(0.98);
    will-change: transform;
    position: relative;
    background: rgba(255, 255, 255, 0.1);
    font-size: 0;
    perspective: 500px;
  }
  .items.active {
    background: rgba(255, 255, 255, 0.3);
    cursor: grabbing;
    transform: scale(1);
  }
  .item {
    width: 200px;
    height: 200px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
    font-weight: 600;
    color: rgba(0, 0, 0, 0.2);
    box-shadow: inset 0 0 0 10px rgba(0, 0, 0, 0.15);
    border-radius: 10px;
    position: absolute;
    cursor: grab;
    transition: transform 0.2s ease;
  }
  .item.dragging {
    cursor: grabbing;
    transform: scale(1.05);
    opacity: 0.8;
    z-index: 10;
  }
  .item:nth-child(9n+1) { background: dodgerblue; }
  .item:nth-child(9n+2) { background: goldenrod; }
  .item:nth-child(9n+3) { background: paleturquoise; }
  .item:nth-child(9n+4) { background: gold; }
  .item:nth-child(9n+5) { background: cadetblue; }
  .item:nth-child(9n+6) { background: tomato; }
  .item:nth-child(9n+7) { background: lightcoral; }
  .item:nth-child(9n+8) { background: darkslateblue; }
  .item:nth-child(9n+9) { background: rebeccapurple; }
  .item:nth-child(even) {
    transform: scaleX(1.31) rotateY(40deg);
  }
  .item:nth-child(odd) {
    transform: scaleX(1.31) rotateY(-40deg);
  }
</style>
</head>
<body>

<div class="items" id="container">
  <!-- 25 cubes -->
  <div class="item">01</div><div class="item">02</div><div class="item">03</div><div class="item">04</div><div class="item">05</div>
  <div class="item">06</div><div class="item">07</div><div class="item">08</div><div class="item">09</div><div class="item">10</div>
  <div class="item">11</div><div class="item">12</div><div class="item">13</div><div class="item">14</div><div class="item">15</div>
  <div class="item">16</div><div class="item">17</div><div class="item">18</div><div class="item">19</div><div class="item">20</div>
  <div class="item">21</div><div class="item">22</div><div class="item">23</div><div class="item">24</div><div class="item">25</div>
</div>

<script>
const container = document.getElementById('container');
const items = container.querySelectorAll('.item');

const cols = 5;
const rows = Math.ceil(items.length / cols);
const spacing = 20;
const cubeSize = 200;

// Initial grid positioning
items.forEach((item, index) => {
  const row = Math.floor(index / cols);
  const col = index % cols;
  item.style.left = `${col * (cubeSize + spacing)}px`;
  item.style.top = `${row * (cubeSize + spacing)}px`;
  item.style.width = `${cubeSize}px`;
  item.style.height = `${cubeSize}px`;
  item.style.position = 'absolute';
});

let selectedItem = null;
let offsetX = 0, offsetY = 0;

items.forEach(item => {
  item.addEventListener('mousedown', e => {
    selectedItem = e.target;
    selectedItem.classList.add('dragging');
    const rect = selectedItem.getBoundingClientRect();
    offsetX = e.clientX - rect.left;
    offsetY = e.clientY - rect.top;
    selectedItem.style.zIndex = 1000;
    e.preventDefault();
  });
});

document.addEventListener('mousemove', e => {
  if (!selectedItem) return;
  const containerRect = container.getBoundingClientRect();
  let left = e.clientX - containerRect.left - offsetX;
  let top = e.clientY - containerRect.top - offsetY;

  left = Math.max(0, Math.min(left, container.clientWidth - selectedItem.offsetWidth));
  top = Math.max(0, Math.min(top, container.clientHeight - selectedItem.offsetHeight));

  selectedItem.style.left = left + 'px';
  selectedItem.style.top = top + 'px';
});

document.addEventListener('mouseup', () => {
  if (selectedItem) {
    selectedItem.classList.remove('dragging');
    selectedItem.style.zIndex = '';
    selectedItem = null;
  }
});

// Prevent native drag on items
items.forEach(item => item.addEventListener('dragstart', e => e.preventDefault()));
</script>

</body>
</html>
